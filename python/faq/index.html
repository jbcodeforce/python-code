<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../python-summary/ rel=prev><link href=../../astronomy/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.17"><title>Advanced - Python code studies</title><link rel=stylesheet href=../../assets/stylesheets/main.bcfcd587.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#python-faq class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Python code studies" class="md-header__button md-logo" aria-label="Python code studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Python code studies </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Advanced </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/python-code title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Python code studies" class="md-nav__button md-logo" aria-label="Python code studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Python code studies </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/python-code title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Introduction </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=true> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Introduction </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Basic </span> </a> </li> <li class=md-nav__item> <a href=../python-summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Advanced </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#why-pipenv class=md-nav__link> <span class=md-ellipsis> Why pipenv? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-get-program-arguments class=md-nav__link> <span class=md-ellipsis> How to get program arguments? </span> </a> <nav class=md-nav aria-label="How to get program arguments?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-arg_parser class=md-nav__link> <span class=md-ellipsis> Using arg_parser </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#pass-a-variable-number-of-arguments-to-a-function class=md-nav__link> <span class=md-ellipsis> Pass a variable number of arguments to a function </span> </a> </li> <li class=md-nav__item> <a href=#what-__init__py-under-folder-used-for class=md-nav__link> <span class=md-ellipsis> what __init__.py under folder used for? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-get-program-dependencies-generated class=md-nav__link> <span class=md-ellipsis> How to get program dependencies generated? </span> </a> </li> <li class=md-nav__item> <a href=#develop-a-module-to-be-installable-with-pip class=md-nav__link> <span class=md-ellipsis> Develop a module to be installable with pip </span> </a> </li> <li class=md-nav__item> <a href=#access-environment-variable class=md-nav__link> <span class=md-ellipsis> Access environment variable </span> </a> </li> <li class=md-nav__item> <a href=#list-content-of-folder class=md-nav__link> <span class=md-ellipsis> List content of folder </span> </a> </li> <li class=md-nav__item> <a href=#change-content-of-yaml class=md-nav__link> <span class=md-ellipsis> Change content of yaml </span> </a> </li> <li class=md-nav__item> <a href=#how-to-sort-unit-tests class=md-nav__link> <span class=md-ellipsis> How to sort unit tests? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-traverse-a-directory-hierarchy class=md-nav__link> <span class=md-ellipsis> How to traverse a directory hierarchy? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-select-a-random-item-from-a-list class=md-nav__link> <span class=md-ellipsis> How to select a random item from a list? </span> </a> </li> <li class=md-nav__item> <a href=#logger class=md-nav__link> <span class=md-ellipsis> Logger </span> </a> </li> <li class=md-nav__item> <a href=#how-to-get-localization-in-python-message class=md-nav__link> <span class=md-ellipsis> How to get localization in python message </span> </a> </li> <li class=md-nav__item> <a href=#reading-files class=md-nav__link> <span class=md-ellipsis> Reading Files </span> </a> <nav class=md-nav aria-label="Reading Files"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#read-json-file class=md-nav__link> <span class=md-ellipsis> Read json file </span> </a> </li> <li class=md-nav__item> <a href=#read-csv-file class=md-nav__link> <span class=md-ellipsis> Read csv file </span> </a> </li> <li class=md-nav__item> <a href=#read-file-with-specific-encoding class=md-nav__link> <span class=md-ellipsis> Read file with specific encoding </span> </a> </li> <li class=md-nav__item> <a href=#skip-the-first-row-of-a-file class=md-nav__link> <span class=md-ellipsis> Skip the first row of a file </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-to-get-execution-time class=md-nav__link> <span class=md-ellipsis> How to get execution time </span> </a> </li> <li class=md-nav__item> <a href=#example-of-memory-consumption-for-object class=md-nav__link> <span class=md-ellipsis> Example of memory consumption for object </span> </a> </li> <li class=md-nav__item> <a href=#using-cloudevent class=md-nav__link> <span class=md-ellipsis> Using CloudEvent </span> </a> </li> <li class=md-nav__item> <a href=#what-is-zip class=md-nav__link> <span class=md-ellipsis> What is zip? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-use-some-math class=md-nav__link> <span class=md-ellipsis> How to use some math </span> </a> </li> <li class=md-nav__item> <a href=#what-is-a-package class=md-nav__link> <span class=md-ellipsis> What is a package? </span> </a> </li> <li class=md-nav__item> <a href=#what-are-namespace-and-scope class=md-nav__link> <span class=md-ellipsis> What are namespace and scope? </span> </a> </li> <li class=md-nav__item> <a href=#customize-matplotlib-graph class=md-nav__link> <span class=md-ellipsis> customize matplotlib graph </span> </a> </li> <li class=md-nav__item> <a href=#how-to-program-web-socket-server class=md-nav__link> <span class=md-ellipsis> How to program web socket server? </span> </a> </li> <li class=md-nav__item> <a href=#using-async-io class=md-nav__link> <span class=md-ellipsis> Using async IO </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../astronomy/ class=md-nav__link> <span class=md-ellipsis> Astronomy statistics and image processing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/dev-env/ class=md-nav__link> <span class=md-ellipsis> Development environment </span> </a> </li> <li class=md-nav__item> <a href=../../coding/uv/ class=md-nav__link> <span class=md-ellipsis> Project mgt with uv </span> </a> </li> <li class=md-nav__item> <a href=../../coding/dp/ class=md-nav__link> <span class=md-ellipsis> Design patterns </span> </a> </li> <li class=md-nav__item> <a href=../../coding/references/ class=md-nav__link> <span class=md-ellipsis> Code studies </span> </a> </li> <li class=md-nav__item> <a href=../../coding/building-cli.md class=md-nav__link> <span class=md-ellipsis> Building CLI </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Data & AI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Data & AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/pandas/ class=md-nav__link> <span class=md-ellipsis> Pandas </span> </a> </li> <li class=md-nav__item> <a href=../../data/webcrawling/readme/ class=md-nav__link> <span class=md-ellipsis> Web Data </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/ML-studies class=md-nav__link> <span class=md-ellipsis> Python and data sciences </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Web App </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Web App </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../fastapi/ class=md-nav__link> <span class=md-ellipsis> FastAPI </span> </a> </li> <li class=md-nav__item> <a href=../../flask/readme/ class=md-nav__link> <span class=md-ellipsis> Flask studies and basic samples </span> </a> </li> <li class=md-nav__item> <a href=../../flask/flask-tdd-docker/ class=md-nav__link> <span class=md-ellipsis> Flask Rest microservice with TDD and Docker </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/jbcodeforce/python-code/tree/master/Flask/firstRESTapp class=md-nav__link> <span class=md-ellipsis> Flask webapp template with docker </span> </a> </li> <li class=md-nav__item> <a href=../pydantic/ class=md-nav__link> <span class=md-ellipsis> Pydantic </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Techno </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Techno </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/aws/ class=md-nav__link> <span class=md-ellipsis> AWS </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/spark-studies class=md-nav__link> <span class=md-ellipsis> Python and Spark </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/kafka-studies class=md-nav__link> <span class=md-ellipsis> Kafka consumer and producer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/ class=md-nav__link> <span class=md-ellipsis> Back to main </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#why-pipenv class=md-nav__link> <span class=md-ellipsis> Why pipenv? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-get-program-arguments class=md-nav__link> <span class=md-ellipsis> How to get program arguments? </span> </a> <nav class=md-nav aria-label="How to get program arguments?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-arg_parser class=md-nav__link> <span class=md-ellipsis> Using arg_parser </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#pass-a-variable-number-of-arguments-to-a-function class=md-nav__link> <span class=md-ellipsis> Pass a variable number of arguments to a function </span> </a> </li> <li class=md-nav__item> <a href=#what-__init__py-under-folder-used-for class=md-nav__link> <span class=md-ellipsis> what __init__.py under folder used for? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-get-program-dependencies-generated class=md-nav__link> <span class=md-ellipsis> How to get program dependencies generated? </span> </a> </li> <li class=md-nav__item> <a href=#develop-a-module-to-be-installable-with-pip class=md-nav__link> <span class=md-ellipsis> Develop a module to be installable with pip </span> </a> </li> <li class=md-nav__item> <a href=#access-environment-variable class=md-nav__link> <span class=md-ellipsis> Access environment variable </span> </a> </li> <li class=md-nav__item> <a href=#list-content-of-folder class=md-nav__link> <span class=md-ellipsis> List content of folder </span> </a> </li> <li class=md-nav__item> <a href=#change-content-of-yaml class=md-nav__link> <span class=md-ellipsis> Change content of yaml </span> </a> </li> <li class=md-nav__item> <a href=#how-to-sort-unit-tests class=md-nav__link> <span class=md-ellipsis> How to sort unit tests? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-traverse-a-directory-hierarchy class=md-nav__link> <span class=md-ellipsis> How to traverse a directory hierarchy? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-select-a-random-item-from-a-list class=md-nav__link> <span class=md-ellipsis> How to select a random item from a list? </span> </a> </li> <li class=md-nav__item> <a href=#logger class=md-nav__link> <span class=md-ellipsis> Logger </span> </a> </li> <li class=md-nav__item> <a href=#how-to-get-localization-in-python-message class=md-nav__link> <span class=md-ellipsis> How to get localization in python message </span> </a> </li> <li class=md-nav__item> <a href=#reading-files class=md-nav__link> <span class=md-ellipsis> Reading Files </span> </a> <nav class=md-nav aria-label="Reading Files"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#read-json-file class=md-nav__link> <span class=md-ellipsis> Read json file </span> </a> </li> <li class=md-nav__item> <a href=#read-csv-file class=md-nav__link> <span class=md-ellipsis> Read csv file </span> </a> </li> <li class=md-nav__item> <a href=#read-file-with-specific-encoding class=md-nav__link> <span class=md-ellipsis> Read file with specific encoding </span> </a> </li> <li class=md-nav__item> <a href=#skip-the-first-row-of-a-file class=md-nav__link> <span class=md-ellipsis> Skip the first row of a file </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-to-get-execution-time class=md-nav__link> <span class=md-ellipsis> How to get execution time </span> </a> </li> <li class=md-nav__item> <a href=#example-of-memory-consumption-for-object class=md-nav__link> <span class=md-ellipsis> Example of memory consumption for object </span> </a> </li> <li class=md-nav__item> <a href=#using-cloudevent class=md-nav__link> <span class=md-ellipsis> Using CloudEvent </span> </a> </li> <li class=md-nav__item> <a href=#what-is-zip class=md-nav__link> <span class=md-ellipsis> What is zip? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-use-some-math class=md-nav__link> <span class=md-ellipsis> How to use some math </span> </a> </li> <li class=md-nav__item> <a href=#what-is-a-package class=md-nav__link> <span class=md-ellipsis> What is a package? </span> </a> </li> <li class=md-nav__item> <a href=#what-are-namespace-and-scope class=md-nav__link> <span class=md-ellipsis> What are namespace and scope? </span> </a> </li> <li class=md-nav__item> <a href=#customize-matplotlib-graph class=md-nav__link> <span class=md-ellipsis> customize matplotlib graph </span> </a> </li> <li class=md-nav__item> <a href=#how-to-program-web-socket-server class=md-nav__link> <span class=md-ellipsis> How to program web socket server? </span> </a> </li> <li class=md-nav__item> <a href=#using-async-io class=md-nav__link> <span class=md-ellipsis> Using async IO </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=python-faq>Python FAQ<a class=headerlink href=#python-faq title="Permanent link">&para;</a></h1> <h2 id=why-pipenv>Why pipenv?<a class=headerlink href=#why-pipenv title="Permanent link">&para;</a></h2> <p>pipenv resolves the problem of dependencies management, that is not perfectly done in the requirements.txt, which leads to under deterministic build process. Given the same input (the requirements.txt file), pip doesnâ€™t always produce the same environment. <code>pip freeze</code> helps to freeze the dependencies and update the requirements.txt. But any dependency change needs to be done manually, and you need to track the dependent package version, for bug fix, or mandatory security fixes.</p> <p>A second problem is the system wide repository used by pip. When developing multiple different projects in parallele that could become a real issue. <code>pipenv</code> use a per project environment. pipenv acts as pip + virtual environment. It uses Pipfile to replace requirements.txt and pipfile.lock for determnistic build. See <a href=https://realpython.com/pipenv-guide/ >this guide</a> for command examples.</p> <h2 id=how-to-get-program-arguments>How to get program arguments?<a class=headerlink href=#how-to-get-program-arguments title="Permanent link">&para;</a></h2> <p>See <a href=https://docs.python.org/3/library/getopt.html>getopt</a></p> <div class=highlight><pre><span></span><code>  <span class=kn>import</span> <span class=nn>sys</span><span class=o>,</span><span class=nn>getopt</span>
  <span class=n>USER</span><span class=o>=</span><span class=s2>&quot;jbcodeforce&quot;</span>
  <span class=n>FILE</span><span class=o>=</span><span class=s2>&quot;./data/export-questions.json&quot;</span>
  <span class=k>try</span><span class=p>:</span>
    <span class=n>opts</span><span class=p>,</span> <span class=n>args</span> <span class=o>=</span> <span class=n>getopt</span><span class=o>.</span><span class=n>getopt</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>,</span><span class=s2>&quot;hi:u:&quot;</span><span class=p>,[</span><span class=s2>&quot;inputfile=&quot;</span><span class=p>,</span><span class=s2>&quot;user=&quot;</span><span class=p>])</span>
  <span class=k>except</span> <span class=n>getopt</span><span class=o>.</span><span class=n>GetoptError</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>usage</span><span class=p>())</span>
    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>


  <span class=k>for</span> <span class=n>opt</span><span class=p>,</span> <span class=n>arg</span> <span class=ow>in</span> <span class=n>opts</span><span class=p>:</span>
    <span class=k>if</span> <span class=n>opt</span> <span class=o>==</span> <span class=s1>&#39;-h&#39;</span><span class=p>:</span>
      <span class=n>usage</span><span class=p>()</span>
      <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>()</span>
    <span class=k>elif</span> <span class=n>opt</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;-u&quot;</span><span class=p>,</span> <span class=s2>&quot;--user&quot;</span><span class=p>):</span>
      <span class=n>USER</span> <span class=o>=</span> <span class=n>arg</span>
    <span class=k>elif</span> <span class=n>opt</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;-i&quot;</span><span class=p>,</span> <span class=s2>&quot;--inputfile&quot;</span><span class=p>):</span>
      <span class=n>FILE</span> <span class=o>=</span> <span class=n>arg</span>
</code></pre></div> <h3 id=using-arg_parser>Using <a href=https://docs.python.org/3/howto/argparse.html>arg_parser</a><a class=headerlink href=#using-arg_parser title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>argparse</span>
<span class=n>parser</span> <span class=o>=</span> <span class=n>argparse</span><span class=o>.</span><span class=n>ArgumentParser</span><span class=p>()</span>
<span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span><span class=s2>&quot;filename&quot;</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s2>&quot;Must specify a file name&quot;</span><span class=p>)</span>
<span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span><span class=s2>&quot;--append&quot;</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s2>&quot;Append records to existing file&quot;</span><span class=p>,</span><span class=n>action</span><span class=o>=</span><span class=s2>&quot;store_true&quot;</span><span class=p>)</span>
<span class=n>args</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=n>parse_args</span><span class=p>()</span>
<span class=k>if</span> <span class=n>args</span><span class=o>.</span><span class=n>append</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;append to file&quot;</span><span class=p>)</span>
</code></pre></div> <h2 id=pass-a-variable-number-of-arguments-to-a-function>Pass a variable number of arguments to a function<a class=headerlink href=#pass-a-variable-number-of-arguments-to-a-function title="Permanent link">&para;</a></h2> <p>We can pass a variable number of arguments to a function using special symbols:</p> <ul> <li>*args (Non-Keyword Arguments): take in more arguments than the number of formal arguments that you previously defined</li> <li>**kwargs (Keyword Arguments): used to pass a keyworded, variable-length argument list.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>myFun</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2> == </span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>))</span>
</code></pre></div> <h2 id=what-__init__py-under-folder-used-for>what <code>__init__.py</code> under folder used for?<a class=headerlink href=#what-__init__py-under-folder-used-for title="Permanent link">&para;</a></h2> <p>The <code>__init__.py</code> file makes Python treat directories containing it as modules. Furthermore, this is the first file to be loaded in a module, so you can use it to execute code that you want to run each time a module is loaded, or specify the submodules to be exported.</p> <h2 id=how-to-get-program-dependencies-generated>How to get program dependencies generated?<a class=headerlink href=#how-to-get-program-dependencies-generated title="Permanent link">&para;</a></h2> <p>To be able to run the python program at any time in the future, it is recommended to freeze the dependencies, so the requirements.txt will have the compatible module versions. </p> <div class=highlight><pre><span></span><code>pip<span class=w> </span>freeze<span class=w> </span>&gt;<span class=w> </span>requirements.txt
</code></pre></div> <h2 id=develop-a-module-to-be-installable-with-pip>Develop a module to be installable with pip<a class=headerlink href=#develop-a-module-to-be-installable-with-pip title="Permanent link">&para;</a></h2> <p>See <a href=https://betterscientificsoftware.github.io/python-for-hpc/tutorials/python-pypi-packaging/ >this article</a>, and <a href=https://packaging.python.org/en/latest/ >Python Packaging User Guide</a> summarized as:</p> <ol> <li>Create a python package (folder) with the setup.py in it. </li> </ol> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>setuptools</span> <span class=kn>import</span> <span class=n>setup</span><span class=p>,</span> <span class=n>find_packages</span>

<span class=n>setup</span><span class=p>(</span>
    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;jb_module&quot;</span><span class=p>,</span>
    <span class=n>version</span><span class=o>=</span><span class=s2>&quot;0.1.0&quot;</span><span class=p>,</span>
    <span class=n>description</span><span class=o>=</span><span class=s2>&quot;The backend to support hybrid AI&quot;</span><span class=p>,</span>
    <span class=n>author</span><span class=o>=</span><span class=s2>&quot;Jerome Boyer&quot;</span><span class=p>,</span>
    <span class=n>packages</span><span class=o>=</span><span class=n>find_packages</span><span class=p>(</span><span class=n>include</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;acme&quot;</span><span class=p>]),</span>
    <span class=n>install_requires</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;uvicorn&#39;</span><span class=p>,</span> <span class=s1>&#39;fastapi&#39;</span><span class=p>,</span> <span class=s1>&#39;langchain-openai&#39;</span><span class=p>,</span><span class=s1>&#39;langchain-anthropic&#39;</span><span class=p>,</span><span class=s1>&#39;langchain_ibm&#39;</span><span class=p>,</span><span class=s1>&#39;langchain_community&#39;</span><span class=p>,</span>
<span class=s1>&#39;pydantic&#39;</span><span class=p>,</span><span class=s1>&#39;python-multipart&#39;</span><span class=p>,</span><span class=s1>&#39;python-dotenv&#39;</span><span class=p>,</span><span class=s1>&#39;markdown&#39;</span><span class=p>,</span><span class=s1>&#39;chromadb&#39;</span><span class=p>,</span><span class=s1>&#39;pypdf&#39;</span><span class=p>],</span> 
<span class=p>)</span>
</code></pre></div> <ol> <li><code>pip3 install setuptool</code></li> <li>install in current virtual env: <code>pip install .</code> or <code>pip install --upgrade .</code>. Install with <code>pip uninstall jb_module</code></li> <li>Add a <code>__init__.py</code> file under the jb_module folder specify version...</li> </ol> <p><div class=highlight><pre><span></span><code><span class=n>__version__</span> <span class=o>=</span> <span class=s2>&quot;0.1.0&quot;</span>
<span class=n>__author__</span> <span class=o>=</span> <span class=s1>&#39;Jerome Boyer&#39;</span>
<span class=n>__credits__</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</code></pre></div> 1. Create a source distribution with: <code>python setup.py sdist</code>, it contains a compressed archive of the package 1. Install twine to be able to upload to PyPi: <code>pip install twine</code> 1. Push the package to test.pypi.org</p> <h2 id=access-environment-variable>Access environment variable<a class=headerlink href=#access-environment-variable title="Permanent link">&para;</a></h2> <p>Define environment variables in a <code>.env</code> file, use os package:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>

<span class=n>AWS_ACCESS_KEY_ID</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AWS_ACCESS_KEY_ID&quot;</span><span class=p>)</span>
<span class=n>AWS_SECRET_ACCESS_KEY</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AWS_SECRET_ACCESS_KEY&quot;</span><span class=p>)</span>
</code></pre></div> <details class="- question"> <summary>How to assess the type of an object?</summary> <p>'''python type(x) == str '''</p> </details> <h2 id=list-content-of-folder>List content of folder<a class=headerlink href=#list-content-of-folder title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>glob</span>

<span class=k>def</span> <span class=nf>listOfYaml</span><span class=p>():</span>
    <span class=k>return</span> <span class=n>glob</span><span class=o>.</span><span class=n>glob</span><span class=p>(</span><span class=s2>&quot;./*.yaml&quot;</span><span class=p>)</span>
</code></pre></div> <h2 id=change-content-of-yaml>Change content of yaml<a class=headerlink href=#change-content-of-yaml title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>glob</span>
<span class=kn>import</span> <span class=nn>yaml</span>

<span class=k>def</span> <span class=nf>listOfYaml</span><span class=p>():</span>
    <span class=k>return</span> <span class=n>glob</span><span class=o>.</span><span class=n>glob</span><span class=p>(</span><span class=s2>&quot;./*.yaml&quot;</span><span class=p>)</span>

<span class=k>def</span> <span class=nf>processYamlFile</span><span class=p>(</span><span class=n>f</span><span class=p>):</span>
    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>f</span><span class=p>)</span> <span class=k>as</span> <span class=n>aYaml</span><span class=p>:</span>
        <span class=n>listDoc</span> <span class=o>=</span> <span class=n>yaml</span><span class=o>.</span><span class=n>safe_load</span><span class=p>(</span><span class=n>aYaml</span><span class=p>)</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>listDoc</span><span class=p>)</span>
    <span class=n>listDoc</span><span class=p>[</span><span class=s2>&quot;metadata&quot;</span><span class=p>][</span><span class=s2>&quot;namespace&quot;</span><span class=p>]</span><span class=o>=</span><span class=s1>&#39;std-2&#39;</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>listDoc</span><span class=p>)</span>


<span class=n>f</span> <span class=o>=</span> <span class=n>listOfYaml</span><span class=p>()</span>
<span class=n>processYamlFile</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</code></pre></div> <h2 id=how-to-sort-unit-tests>How to sort unit tests?<a class=headerlink href=#how-to-sort-unit-tests title="Permanent link">&para;</a></h2> <p>Use <code>TestSuite</code> and <code>TestRunner</code>. See TestPerceptron.py for usage.</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>unittest</span>

<span class=k>class</span> <span class=nc>TestPerceptron</span><span class=p>(</span><span class=n>unittest</span><span class=o>.</span><span class=n>TestCase</span><span class=p>):</span>
  <span class=c1># ....</span>
<span class=k>def</span> <span class=nf>suite</span><span class=p>():</span>
    <span class=n>suite</span> <span class=o>=</span> <span class=n>unittest</span><span class=o>.</span><span class=n>TestSuite</span><span class=p>()</span>
    <span class=n>suite</span><span class=o>.</span><span class=n>addTest</span><span class=p>(</span><span class=n>TestPerceptron</span><span class=p>(</span><span class=s1>&#39;testLoadIrisData&#39;</span><span class=p>))</span>
    <span class=n>suite</span><span class=o>.</span><span class=n>addTest</span><span class=p>(</span><span class=n>TestPerceptron</span><span class=p>(</span><span class=s1>&#39;testPlotIrisData&#39;</span><span class=p>))</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>runner</span> <span class=o>=</span> <span class=n>unittest</span><span class=o>.</span><span class=n>TextTestRunner</span><span class=p>(</span><span class=n>failfast</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=n>runner</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>suite</span><span class=p>())</span>
</code></pre></div> <h2 id=how-to-traverse-a-directory-hierarchy>How to traverse a directory hierarchy?<a class=headerlink href=#how-to-traverse-a-directory-hierarchy title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>osfor</span>
<span class=n>root</span><span class=p>,</span> <span class=n>dirs</span><span class=p>,</span> <span class=n>files</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>walk</span><span class=p>(</span><span class=s2>&quot;/mydir&quot;</span><span class=p>):</span>    
  <span class=k>for</span> <span class=n>file</span> <span class=ow>in</span> <span class=n>files</span><span class=p>:</span>        
    <span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&quot;.txt&quot;</span><span class=p>):</span>             
      <span class=nb>print</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>file</span><span class=p>))</span>
</code></pre></div> <h2 id=how-to-select-a-random-item-from-a-list>How to select a random item from a list?<a class=headerlink href=#how-to-select-a-random-item-from-a-list title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>random</span>
<span class=n>move</span><span class=o>=</span><span class=n>random</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>possibleMoves</span><span class=p>)</span>
</code></pre></div> <h2 id=logger>Logger<a class=headerlink href=#logger title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>
<span class=n>LOGGER</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
<span class=n>LOGGER</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;an interesting string&quot;</span><span class=p>)</span>
</code></pre></div> <p>Start python with the <code>--log=INFO</code> to set the logging level.</p> <h2 id=how-to-get-localization-in-python-message>How to get localization in python message<a class=headerlink href=#how-to-get-localization-in-python-message title="Permanent link">&para;</a></h2> <p>How to make a string translated in another language using GNU gettext.</p> <p>See the code test_localize.py</p> <ul> <li>install poedit</li> <li>upadte PATH to point to <code>C:\Program Files (x86)\Poedit\GettextTools\bin</code></li> <li>get the localizable string from the python program</li> <li>xgettext -d app -o localize/app.pot test_localize.py</li> <li>then create localize/fr/LC_MESSAGES/app.po from the created app.po under localize</li> <li>Compile the po to mo: msgfmt -o localize/fr/LC_MESSAGES/app.mo localize/fr/LC_MESSAGES/app</li> <li>export LANG=fr</li> <li>python test_localize.py</li> </ul> <h2 id=reading-files>Reading Files<a class=headerlink href=#reading-files title="Permanent link">&para;</a></h2> <h3 id=read-json-file>Read json file<a class=headerlink href=#read-json-file title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>g</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;critics.json&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span>
<span class=n>d</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>g</span><span class=p>)</span>
</code></pre></div> <h3 id=read-csv-file>Read csv file<a class=headerlink href=#read-csv-file title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;fn.csv&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span>
<span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>f</span><span class=p>:</span>
  <span class=n>record</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>)</span>

<span class=c1># or with unicode:</span>
  <span class=n>changedLine</span><span class=o>=</span><span class=sa>u</span><span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>line</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</code></pre></div> <h3 id=read-file-with-specific-encoding>Read file with specific encoding<a class=headerlink href=#read-file-with-specific-encoding title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code> <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;../data/movielens/u.item&#39;</span><span class=p>,</span>  <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;ISO-8859-1&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</code></pre></div> <h3 id=skip-the-first-row-of-a-file>Skip the first row of a file<a class=headerlink href=#skip-the-first-row-of-a-file title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;fn.csv&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span>
<span class=n>f</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span>
<span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>f</span><span class=p>:</span>
</code></pre></div> <h2 id=how-to-get-execution-time>How to get execution time<a class=headerlink href=#how-to-get-execution-time title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>time</span>
<span class=n>start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>perf_counter</span><span class=p>()</span>
<span class=c1># potentially slow computation</span>
<span class=n>end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>perf_counter</span><span class=p>()</span> <span class=o>-</span> <span class=n>start</span>
</code></pre></div> <h2 id=example-of-memory-consumption-for-object>Example of memory consumption for object<a class=headerlink href=#example-of-memory-consumption-for-object title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>sys</span>

<span class=n>a</span> <span class=o>=</span> <span class=mi>3</span>
<span class=n>b</span> <span class=o>=</span> <span class=mf>3.123</span>
<span class=n>c</span> <span class=o>=</span> <span class=p>[</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>]</span>
<span class=n>d</span> <span class=o>=</span> <span class=p>[]</span>
<span class=k>for</span> <span class=n>obj</span> <span class=ow>in</span> <span class=p>[</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>d</span><span class=p>]:</span>
  <span class=nb>print</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>sys</span><span class=o>.</span><span class=n>getsizeof</span><span class=p>(</span><span class=n>obj</span><span class=p>))</span>
</code></pre></div> <h2 id=using-cloudevent>Using <a href=https://github.com/cloudevents/sdk-python>CloudEvent</a><a class=headerlink href=#using-cloudevent title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>attributes</span> <span class=o>=</span> <span class=p>{</span>
      <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;com.anycompany.bdcp.user&quot;</span><span class=p>,</span>
      <span class=s2>&quot;source&quot;</span><span class=p>:</span> <span class=s2>&quot;https://anycompany.com/user-mgr&quot;</span><span class=p>,</span>
<span class=p>}</span>
<span class=n>data</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&quot;eventType&quot;</span><span class=p>:</span> <span class=s2>&quot;UserLogin&quot;</span><span class=p>,</span> <span class=s2>&quot;username&quot;</span><span class=p>:</span> <span class=s2>&quot;bob.the.builder@superemail.com&quot;</span><span class=p>}</span>
<span class=n>event</span> <span class=o>=</span> <span class=n>CloudEvent</span><span class=p>(</span><span class=n>attributes</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</code></pre></div> <h2 id=what-is-zip>What is zip?<a class=headerlink href=#what-is-zip title="Permanent link">&para;</a></h2> <p>Returns an iterator of tuples, where the i-th tuple contains the i-th element from each of the argument sequences or iterable:</p> <div class=highlight><pre><span></span><code><span class=n>dataset</span>
<span class=p>[[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>22</span><span class=p>,</span> <span class=mi>0</span><span class=p>]]</span>
<span class=k>for</span> <span class=n>a</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=o>*</span><span class=n>dataset</span><span class=p>):</span> <span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
<span class=p>(</span><span class=mi>20</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>22</span><span class=p>)</span>
<span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</code></pre></div> <h2 id=how-to-use-some-math>How to use some math<a class=headerlink href=#how-to-use-some-math title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=c1># modulo</span>
<span class=mi>8</span> <span class=o>%</span> <span class=mi>2</span>
<span class=mi>0</span>
<span class=c1>#</span>
</code></pre></div> <h2 id=what-is-a-package>What is a package?<a class=headerlink href=#what-is-a-package title="Permanent link">&para;</a></h2> <p>A package is nothing more than a folder, which must contain a special file, <strong>init</strong>.py. (not needed anymore with python3.3+)</p> <h2 id=what-are-namespace-and-scope>What are namespace and scope?<a class=headerlink href=#what-are-namespace-and-scope title="Permanent link">&para;</a></h2> <p>A namespace is a mapping from names to objects. They are the built-in names, the global names in a module, and the local names in a function. A scope is a textual region of a Python program, where a namespace is directly accessible. There are four different scopes that Python makes accessible:</p> <ul> <li>The local scope, which is the innermost one and contains the local names.</li> <li>The enclosing scope, that is, the scope of any enclosing function. It contains non-local names and also non-global names.</li> <li>The global scope contains the global names.</li> <li>The built-in scope contains the built-in names.</li> </ul> <h2 id=customize-matplotlib-graph>customize matplotlib graph<a class=headerlink href=#customize-matplotlib-graph title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>    <span class=n>graph</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&quot;Results of 500 slot machine pulls&quot;</span><span class=p>)</span>
    <span class=c1># Make the y-axis begin at 0</span>
    <span class=n>graph</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>(</span><span class=n>bottom</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
    <span class=c1># Label the y-axis</span>
    <span class=n>graph</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s2>&quot;Balance&quot;</span><span class=p>)</span>
    <span class=c1># Bonus: format the numbers on the y-axis as dollar amounts</span>
    <span class=c1># An array of the values displayed on the y-axis (150, 175, 200, etc.)</span>
    <span class=n>ticks</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=n>get_yticks</span><span class=p>()</span>
    <span class=c1># Format those values into strings beginning with dollar sign</span>
    <span class=n>new_labels</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;$</span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>amt</span><span class=p>))</span> <span class=k>for</span> <span class=n>amt</span> <span class=ow>in</span> <span class=n>ticks</span><span class=p>]</span>
    <span class=c1># Set the new labels</span>
    <span class=n>graph</span><span class=o>.</span><span class=n>set_yticklabels</span><span class=p>(</span><span class=n>new_labels</span><span class=p>)</span>
</code></pre></div> <h2 id=how-to-program-web-socket-server>How to program web socket server?<a class=headerlink href=#how-to-program-web-socket-server title="Permanent link">&para;</a></h2> <p>See <a href=https://fastapi.tiangolo.com/advanced/websockets/ >FastAPI doc</a> with <a href=https://fastapi.tiangolo.com/advanced/testing-websockets/ >testing</a> and matching code in <a href=https://github.com/jbcodeforce/python-code/tree/master/web_server/websocket_server>websocket_server</a></p> <h2 id=using-async-io>Using async IO<a class=headerlink href=#using-async-io title="Permanent link">&para;</a></h2> <p><strong>Multiprocessing</strong> is ideal for CPU-bound tasks (for-loop code) and uses multiple core to run code in parallel. <strong>Concurrency</strong> is the property to run in an overlapping manner. <strong>Threading</strong> is a concurrent execution model whereby multiple threads take turns executing tasks. Threads are used for IO-bound jobs (waiting on input/output to complete). The Python aAsync IO is a single-threaded, single-process design: it uses <strong>cooperative multitasking</strong>. <a href=https://realpython.com/async-io-python/#the-rules-of-async-io>See this tutorial</a>: Async io is supported by <code>async</code> and <code>await</code> language keywords. Asynchronous routines are able to <em>pause</em> while waiting on their ultimate result and let other routines run in the meantime. async model is built around concepts such as callbacks, events, transports, protocols, and futures. <code>await</code> passes the function control back to the event loop. A <strong>coroutine</strong> is a function that can suspend its execution before reaching return. The <code>async def</code> for a function, creates a native <strong>coroutine</strong>, or an asynchronous generator. See code in <a href=https://github.com/jbcodeforce/python-code/tree/master/web_server/api_stream/ >api_stream</a>. <code>async for</code> and <code>async with</code> are generators too. To call a coroutine function, you must await it to get its results. <code>test_stream()</code> is suspended until it got the results from <code>call_llm_astream()</code>:</p> <div class=highlight><pre><span></span><code><span class=k>async</span> <span class=k>def</span> <span class=nf>test_stream</span><span class=p>():</span>
  <span class=k>await</span> <span class=n>call_llm_astream</span><span class=p>()</span>
</code></pre></div> <p>To run a corouting, we need the python asyncio module:</p> <div class=highlight><pre><span></span><code><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
  <span class=k>await</span> <span class=n>call_to_an_async_function</span><span class=p>()</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</code></pre></div> <p><strong>yield</strong> keyword in an <code>async def</code> block creates an asynchronous generator, which you iterate over with <code>async for</code>. A generator defined await and next methods. So it pushes value to calling stack at the yield level, but it also keeps a hold of its local variables when the program resume it by calling next() on it (<code>async for</code> calls the next() implicitly as it is a asynchronous iterator). </p> <p>By default, an async IO event loop runs in a single thread and on a single CPU core.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.1e8ae164.min.js></script> </body> </html>